<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" sizes="32x32" href="/logo.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/logo.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/logo.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="/logo.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="/logo.png" />
    <link rel="shortcut icon" type="image/png" href="/logo.png" />
    <meta name="theme-color" content="#6B46C1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Eclyptica.com - Астрология, Личен Хороскоп и Натални Карти</title>
    <meta name="description" content="Eclyptica.com - Персонализирани натални карти, дневни хороскопи и професионални астрологични анализи. Открийте космическата си истина с нашите експертни услуги." />
    <meta name="keywords" content="астрология, личен хороскоп, натална карта, Eclyptica, зодия, астрологични прогнози, космическа мъдрост" />
    <meta name="author" content="Eclyptica.com" />

    <meta property="og:title" content="Eclyptica.com - Астрология и Личен Хороскоп" />
    <meta property="og:description" content="Персонализирани астрологични услуги, натални карти и хороскопи. Открийте космическата си истина с Eclyptica." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@Eclyptica" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <script>
      /* Eclyptica Safari Stability Patch v1 (drop-in)
         - Fixes common Safari/WebKit layout + scroll glitches
         - Adds viewport vars (--vh) using visualViewport
         - Adds safe flex/grid shrinking defaults
         - Improves momentum scrolling on inner scrollers
         - Optional: disables heavy blur during scroll to avoid "glitch"
      */
      (() => {
        const ua = navigator.userAgent;
        const isSafari = /Safari/i.test(ua) && !/Chrome|Chromium|CriOS|Edg|OPR|FxiOS|Firefox/i.test(ua);
        const isIOSWebKit =
          /iP(ad|hone|od)/.test(ua) || (navigator.platform === "MacIntel" && navigator.maxTouchPoints > 1);

        if (!isSafari && !isIOSWebKit) return;

        const root = document.documentElement;
        root.classList.add("is-webkit");
        if (isSafari) root.classList.add("is-safari");
        if (isIOSWebKit) root.classList.add("is-ios");
        root.dataset.browser = isSafari ? "safari" : "webkit";

        const css = `
          html.is-webkit { -webkit-text-size-adjust: 100%; text-size-adjust: 100%; }
          html.is-ios, html.is-ios body { height: -webkit-fill-available; }
          html.is-webkit .flex, html.is-webkit .grid { min-width: 0; }
          html.is-webkit .flex > *, html.is-webkit .grid > * { min-width: 0; min-height: 0; }
          html.is-webkit .overflow-auto,
          html.is-webkit .overflow-scroll,
          html.is-webkit [data-scroll],
          html.is-webkit .scroll-container {
            -webkit-overflow-scrolling: touch;
          }
          html.is-webkit .h-screen { height: calc(var(--vh, 1vh) * 100) !important; }
          html.is-webkit .min-h-screen { min-height: calc(var(--vh, 1vh) * 100) !important; }
          html.is-webkit .vh-100 { height: calc(var(--vh, 1vh) * 100) !important; }
          html.is-webkit .min-vh-100 { min-height: calc(var(--vh, 1vh) * 100) !important; }
          .safe-top { padding-top: env(safe-area-inset-top); }
          .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
          html.is-webkit.safari-scrolling .backdrop-blur,
          html.is-webkit.safari-scrolling [class*="backdrop-blur"],
          html.is-webkit.safari-scrolling [data-blur-on-scroll] {
            -webkit-backdrop-filter: none !important;
            backdrop-filter: none !important;
          }
          @media (prefers-reduced-motion: reduce) {
            * {
              animation-duration: 0.001ms !important;
              animation-iteration-count: 1 !important;
              transition-duration: 0.001ms !important;
              scroll-behavior: auto !important;
            }
          }
        `;
        const style = document.createElement("style");
        style.setAttribute("data-safari-patch", "1");
        style.textContent = css;
        document.head.appendChild(style);

        let raf = 0;
        const setVars = () => {
          raf = 0;
          const vv = window.visualViewport;
          const h = vv ? vv.height : window.innerHeight;
          const w = vv ? vv.width : window.innerWidth;
          root.style.setProperty("--vh", `${h * 0.01}px`);
          root.style.setProperty("--vw", `${w * 0.01}px`);
          root.style.setProperty("--vvh", `${h}px`);
          root.style.setProperty("--vvw", `${w}px`);
        };
        const schedule = () => {
          if (raf) return;
          raf = requestAnimationFrame(setVars);
        };

        schedule();
        window.addEventListener("resize", schedule, { passive: true });
        window.addEventListener("orientationchange", schedule, { passive: true });
        if (window.visualViewport) {
          window.visualViewport.addEventListener("resize", schedule, { passive: true });
          window.visualViewport.addEventListener("scroll", schedule, { passive: true });
        }

        let scrollTimer = 0;
        const onScroll = () => {
          if (!root.classList.contains("safari-scrolling")) root.classList.add("safari-scrolling");
          clearTimeout(scrollTimer);
          scrollTimer = setTimeout(() => root.classList.remove("safari-scrolling"), 140);
        };
        window.addEventListener("scroll", onScroll, { passive: true });

        const forceReflow = () => {
          if (document.body) void document.body.offsetHeight;
          schedule();
        };
        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", () => requestAnimationFrame(forceReflow), { once: true });
        } else {
          requestAnimationFrame(forceReflow);
        }
        if (document.fonts && document.fonts.ready) {
          document.fonts.ready.then(() => requestAnimationFrame(forceReflow)).catch(() => {});
        }
      })();
    </script>
  </body>
</html>
